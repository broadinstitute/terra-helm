# This is used to provision an automatically renewing TLS
# cert with Let's Encrypt as CA.
# More info at https://cert-manager.io/docs/usage/certificate
apiVersion: cert-manager.io/v1alpha2
kind: Certificate
metadata:
  name: {{ .Values.ingress.tlsSecretName }}
spec:
  secretName: tls-secret
  renewBefore: 720h0m0s # 30 days before expiration
  dnsNames:
  - {{ .Values.ingress.hostName }}
  # This is configured externally to this chart.
  # more info at https://cert-manager.io/docs/configuration/acme/dns01/ 
  issuerRef:
    name: letsencrypt-prod-issuer
    kind: ClusterIssuer
