certManager:
  # certManager.enabled -- (bool) Use tls credentials generated by cert-manager via lets encrypt
  enabled: false
  # certMAnager.renewBefore -- (string) Time before expiration when cert-manager will auto renew tls. Default is 30 days. Must be specified in hours
  renewBefore: 720h # 30 days before exp

  # Default lets-encypt certificates 
  issuerName: cert-manager-letsencrypt-prod
  issuerKind: ClusterIssuer

vaultCert:
  # vaultCert.enabled -- Enable to sync certificate secret from Vault with secrets-manager
  enabled: true
  cert:
    # vaultCert.cert.path -- (string) Path to secret containing .crt
    path: secret/dsde/firecloud/dev/common/server.crt
    # vaultCert.cert.secretKey -- (string) Key in secret containing .crt
    secretKey: value
  key:
    # vaultCert.key.path -- (string) Path to secret containing .key
    path: secret/dsde/firecloud/dev/common/server.key
    # vaultCert.key.secretKey -- (string) Key in secret containing .key
    secretKey: value
  chain:
    # vaultCert.chain.path -- (string) Path to secret containing intermediate .crt
    path: secret/common/ca-bundle.crt
    # vaultCert.chain.secretKey -- (string) Key in secret containing intermediate .crt
    secretKey: chain


# Promethues-Operator values
prometheus-operator:
  # promtheus-operator.fullnameOverride -- (string) Use the name of this chart rather than prometheus operator built in templating.
  fullnameOverride: "terra-prometheus-operator"
  prometheusOperator:
    # prometheusOperator.createCustomResource -- Older versions of prometheus-operator had issues installing crds properly, this may no longer be needed.
    createCustomResource: false

  prometheus:
    ingress:
      # prometheus-operator.prometheus.ingress.enabled -- expose prometheus web ui through gke ingress
      enabled: true
      annotations:
      # prometheus-operator.prometheus.ingress.annotations -- annotations to attache to prometheus ingress resource.
        kubernetes.io/ingress.global-static-ip-name: terra-dev-prometheus-ip
        kubernetes.io/ingress.allow-http: "false"

      hosts:
      # prometheus-operator.prometheus.ingress.hosts -- ([string]) List of domain host(s) that the ingress should be accessible from 
        - prometheus.dsde-dev.broadinstitute.org

      paths:
      # prometheus-operator.prometheus.ingress.paths --([string]) List of paths if the ingress supports multiple backend services
        - /*

      tls:
        - secretName: terra-prometheus-cert

    service:
      annotations:
        cloud.google.com/backend-config: '{"ports": {"9090": "prometheus-cloud-armor"}}'
      type: NodePort


    prometheusSpec:
      externalUrl: http://prometheus.dsde-dev.broadinstitute.org
  #     containers:
  #       # - name: stackdriver-exporter
  #       #   image: gcr.io/stackdriver-prometheus/stackdriver-prometheus-sidecar:0.7.5
  #       #   imagePullPolicy: Always
  #       #   args: 
  #       #     - --stackdriver.project-id=
  #       #     - --prometheus.wal-directory=prometheus/wal
  #       #     - --stackdriver.kubernetes.location={{ required "A valid gcp region is required." .Values.stackdriverSidecar.region }}
  #       #     - --stackdriver.kubernetes.cluster-name={{ required "A valid GKE cluster name is required" .Values.stackdriverSidecar.clusterName }}
  #       #     #- \"--stackdriver.generic.location=us-central1\"
  #       #     #- \"--stackdriver.generic.namespace=terra-stackdriver-k8s\"
  #       #   ports:
  #       #     - name: stackdriver-exp
  #       #       containerPort: 9091
  #       #   volumeMounts:
  #       #     - name: prometheus-terra-prometheus-operator-prometheus-db
  #       #       mountPath: /prometheus