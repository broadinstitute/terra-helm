certManager:
  # Use cert manager for ingress tls
  enabled: false
  # How long before expiration to renew certificate
  renewBefore: 720h # 30 days before exp

  # Default lets-encypt certificates 
  issuerName: cert-manager-letsencrypt-prod
  issuerKind: ClusterIssuer

vaultCert:
  # vaultCert.enabled -- Enable to sync certificate secret from Vault with secrets-manager
  enabled: true
  cert:
    # vaultCert.cert.path -- (string) Path to secret containing .crt
    path: secret/dsde/firecloud/dev/common/server.crt
    # vaultCert.cert.secretKey -- (string) Key in secret containing .crt
    secretKey: value
  key:
    # vaultCert.key.path -- (string) Path to secret containing .key
    path: secret/dsde/firecloud/dev/common/server.key
    # vaultCert.key.secretKey -- (string) Key in secret containing .key
    secretKey: value
  chain:
    # vaultCert.chain.path -- (string) Path to secret containing intermediate .crt
    path: secret/common/ca-bundle.crt
    # vaultCert.chain.secretKey -- (string) Key in secret containing intermediate .crt
    secretKey: chain


# Promethues-Operator values
prometheus-operator:
  fullnameOverride: "terra-prometheus-operator"
  prometheusOperator:
    createCustomResource: false

  prometheus:
    ingress:
      enabled: true
      annotations:
        kubernetes.io/ingress.global-static-ip-name: terra-dev-prometheus-ip
        kubernetes.io/ingress.allow-http: "false"

      hosts:
        - prometheus.dsde-dev.broadinstitute.org

      paths:
        - /*

      tls:
        - secretName: terra-prometheus-cert

    service:
      annotations:
        cloud.google.com/backend-config: '{"ports": {"9090": "prometheus-cloud-armor"}}'
      type: NodePort


    prometheusSpec:
      externalUrl: http://prometheus.dsde-dev.broadinstitute.org
  #     containers:
  #       # - name: stackdriver-exporter
  #       #   image: gcr.io/stackdriver-prometheus/stackdriver-prometheus-sidecar:0.7.5
  #       #   imagePullPolicy: Always
  #       #   args: 
  #       #     - --stackdriver.project-id=
  #       #     - --prometheus.wal-directory=prometheus/wal
  #       #     - --stackdriver.kubernetes.location={{ required "A valid gcp region is required." .Values.stackdriverSidecar.region }}
  #       #     - --stackdriver.kubernetes.cluster-name={{ required "A valid GKE cluster name is required" .Values.stackdriverSidecar.clusterName }}
  #       #     #- \"--stackdriver.generic.location=us-central1\"
  #       #     #- \"--stackdriver.generic.namespace=terra-stackdriver-k8s\"
  #       #   ports:
  #       #     - name: stackdriver-exp
  #       #       containerPort: 9091
  #       #   volumeMounts:
  #       #     - name: prometheus-terra-prometheus-operator-prometheus-db
  #       #       mountPath: /prometheus