apiVersion: v1
kind: Service
metadata:
  name: cromwell1
spec:
  selector:
    app: cromwell1-reader
  ports:
  - protocol: TCP
    port: 443
    targetPort: 443
  type: LoadBalancer
  loadBalancerIP: {{ .Values.reader.serviceIP }}
{{- if not (empty .Values.reader.loadBalancerSourceRanges) }}
  loadBalancerSourceRanges:
  {{- range $cidr := .Values.reader.loadBalancerSourceRanges }}
  - {{ $cidr }}
  {{- end -}}
{{- end }}
