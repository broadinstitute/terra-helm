apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-inputs
  namespace: {{ .Release.Namespace }}
  labels:
{{ include "filebeat.labels" . | indent 4 }}
data:
  kubernetes.yml: |-
    - type: docker
      enabled: true
      containers.ids:
      - "*"
      processors:
        - add_kubernetes_metadata:
            in_cluster: true
        - drop_event:
            when:
              and:
              - not:
                  equals:
                    kubernetes.namespace: terra-{{ required "a valid environment name is required ie: dev, perf, etc..." .Values.environmentName }}
              - equals:
                  kubernetes.pod.name: *workspacemanager*
