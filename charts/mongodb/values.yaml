# vaultSecretsPath -- Where in Vault to find secrets used by MongoDB chart. Required keys: `replicaSetKey`, `rootPassword`, `userPassword`
vaultSecretsPath:

# vaultAgoraPasswordPath -- Where in Vault the agora user's MongoDB password is stored
vaultAgoraPasswordPath:

# vaultAgoraPasswordKey -- What key in Vault contains agora user's MongoDB password
vaultAgoraPasswordKey:

# name -- the name of the service deployed by this chart. Defaults to "mongodb". If this value is overridden, be careful to also update the bitnami subchart values to match!
name: mongodb

# These values are passed to the upstream bitnami chart.
bitnami:
  image:
    tag: 4.4.3
  arbiter: # Disable arbiter since the dataset is small & we can run 3 replicas
    enabled: false
  architecture: replicaset
  auth:
    existingSecret: mongodb-secrets # Update to match .Values.name if changed!
    username: agora
    database: agora
  fullnameOverride: mongodb # Update to match .Values.name if changed!
  persistence:
    annotations:
      bio.terra/snapshot-policy: terra-snapshot-policy
    size: 50Gi
  replicaCount: 3
  resources: # Match existing prod MongoDB instances
    limits:
      cpu: 4
      memory: 25Gi
    requests:
      cpu: 4
      memory: 25Gi
  serviceAccount:
    create: false
    name: mongodb-sa # Update to match .Values.name if changed!
  volumePermissions:
    enabled: true
