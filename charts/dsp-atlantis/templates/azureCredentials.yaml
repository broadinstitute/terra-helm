{{- if .Values.azure.enabled -}}
apiVersion: secrets-manager.tuenti.io/v1alpha1
kind: SecretDefinition
metadata:
  name: {{ .Values.name }}-azure-env-secretdefinition
  labels:
    {{- include "dsp-atlantis.labels" . | nindent 4 }}
spec:
  name: azure-env
  keysMap:
    ARM_CLIENT_SECRET:
      path: {{ required "A valid .Values.vault.azure.pathPrefix is required" .Values.vault.azure.pathPrefix }}/atlantis/ad-credentials
      key: client_secret
    ARM_CLIENT_ID:
      path: {{ required "A valid .Values.vault.azure.pathPrefix is required" .Values.vault.azure.pathPrefix }}/atlantis/ad-credentials
      key: client_id
    ARM_TENANT_ID:
      path: {{ required "A valid .Values.vault.azure.pathPrefix is required" .Values.vault.azure.pathPrefix }}/atlantis/ad-credentials
      key: tenant_id
{{- end -}}
