{{- if .Values.cleanup.enabled }}
apiVersion: secrets-manager.tuenti.io/v1alpha1
kind: SecretDefinition
metadata:
  name: atlantis-secretdef
  labels: 
    {{- template "dsp-atlantis.labels" }}
spec:
  name: atlantis-cleanup-secrets
  keysMap:
    cleanup-credentials:
      key: {{ required "A valid vaultSecrets.cleanupCredentials.key is required" .Values.vaultSecrets.cleanupCredentials.key }}
      path: {{ required "A valid vaultSecrets.cleanupCredentials.path is required" .Values.vaultSecrets.cleanupCredentials.path }}
      encoding: base64
{{- end }}