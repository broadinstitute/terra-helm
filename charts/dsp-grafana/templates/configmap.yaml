{{- if .Values.githubTeamSync.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.global.name }}-github-team-sync-cm-env
  labels:
    {{- include "grafana.labels" . | nindent 4 }}
data:
  {{- with .Values.githubTeamSync }}
  {{- if .teamGrantingGrafanaAdmin }}
  TEAM_GRANTING_ADMIN: {{ .teamGrantingGrafanaAdmin }}
  {{- end }}
  TARGET_GRAFANA_ORG_ID: {{ .targetGrafanaOrgId | quote }}
  NEVER_REMOVE_PERMISSIONS_FROM: {{ .neverRemovePermissionsFrom }}
  GRAFANA_HOST: {{ .grafanaHost | required "grafanaHost is required for the github sync" }}
  GRAFANA_PROTOCOL: {{ .grafanaProtocol | required "grafanaProtocol is required for the github sync" }}
  {{- if .grafanaPort }}
  GRAFANA_PORT: {{ .grafanaPort | quote }}
  {{- end }}
  {{- end }}
{{- end }}
