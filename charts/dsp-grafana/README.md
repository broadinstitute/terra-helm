# dsp-grafana

![Version: 1.0.0](https://img.shields.io/badge/Version-1.0.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

Wrapper providing GKE ingress and DSP secrets around grafana

## Source Code

* <https://github.com/broadinstitute/terra-helm/tree/master/charts>
* <https://github.com/grafana/helm-charts/tree/main/charts/grafana>

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://terra-helm-thirdparty.storage.googleapis.com/ | grafana | 6.17.5 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| global.name | string | `"grafana"` |  |
| grafana.envFromSecret | string | `"{{ .Values.global.name }}-container-env"` |  |
| grafana.ingress.enabled | bool | `false` | DISABLE grafana's built-in ingress |
| grafana.revisionHistoryLimit | int | `0` | Replicaset revisions not saved since we'd rollback via gitops or argo |
| grafana.service.annotations."cloud.google.com/app-protocols" | string | `"{\"service\":\"HTTP\"}"` |  |
| grafana.service.annotations."cloud.google.com/backend-config" | string | `"{\"default\": \"grafana-ingress-backendconfig\"}"` |  |
| grafana.service.annotations."cloud.google.com/neg" | string | `"{\"ingress\": true}"` |  |
| grafana.service.port | int | `80` | Port to run the (non-HTTPS) service over |
| ingress.cert.preSharedCerts | list | `[]` | Previously provisioned certs to use on the LB |
| ingress.certmanager.dnsNames | list | `[]` | FQDNs to allocate cert for |
| ingress.certmanager.enabled | bool | `true` | If CertManager should be used to dynamically provision an LB cert |
| ingress.enabled | bool | `true` | ENABLE this wrapper's simpler ingress config |
| ingress.requestPath | string | `"/api/health"` | Path to use for LB health checks |
| ingress.securityPolicy | string | `nil` | Optionally, the name of a cloud armor security policy to apply to the ingress backend |
| ingress.staticIpName | string | `nil` | Name of static IP previously allocated in the project |
| ingress.timeoutSec | int | `120` | Seconds before LB health check will time out |
| secrets.containerEnv | list | `[{"envVar":null,"sourceEncoding":"text","vaultKey":null,"vaultPath":null}]` | (list) Secrets to be placed into environment variables in the grafana container |
| secrets.containerEnv[0].envVar | string | `nil` | Name of the environment variable to create |
| secrets.containerEnv[0].sourceEncoding | string | `"text"` | (string) Encoding of the secret value in vault (either `text` or `base64`) |
| secrets.containerEnv[0].vaultKey | string | `nil` | Key within the desired Vault secret to the desired individual secret value to use |
| secrets.containerEnv[0].vaultPath | string | `nil` | Path within Vault to the desired Vault secret |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
