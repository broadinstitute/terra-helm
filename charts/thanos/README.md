# thanos

![Version: 0.2.0](https://img.shields.io/badge/Version-0.2.0-informational?style=flat-square)

Chart for deploying Thanos metrics system in dsp infrastructure

## Source Code

* <https://github.com/broadinstitute/terra-helm/tree/master/charts>

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://charts.bitnami.com/bitnami | thanos-remote(thanos) | 8.0.3 |
| https://charts.bitnami.com/bitnami | thanos-local(thanos) | 8.0.3 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| global.name | string | `"thanos"` | A name for the deployment that will be substituted into resource definitions |
| ingress.cert.preSharedCerts | list | `[]` | list of existing certificates in google to associate with the ingress |
| ingress.certmanager.enabled | bool | `true` | whether to use certmanager to provision a lets encrypt cert for the ingress |
| ingress.domain.hostname | string | `"thanos"` | hostname to access thanos server |
| ingress.domain.suffix | string | `"dsp-devops.broadinstitute.org"` | suffix of the dns zone thanos records are provisioned in |
| ingress.enabled | bool | `true` | Whether to create ingress and associated resources for thanos query |
| ingress.iap.enabled | bool | `false` | whether to use IAP as an oauth layer for access to thanos |
| ingress.securityPolicy | string | `""` | name of cloud armor policy used to restrict access to thanos |
| ingress.sslPolicy | string | `nil` | policy to restrict the tls versions or ciphers that can be used with thanos |
| ingress.staticIpName | string | `nil` | name of the global static ip to associate with the ingress |
| ingress.timeoutSec | int | `120` | timeout for the ingress loadbalancer health check |
| thanos-local.fullnameOverride | string | `"thanos-local"` |  |
| thanos-local.metrics.enabled | bool | `true` |  |
| thanos-local.query.dnsDiscovery.enabled | bool | `false` | whether to have the query attempt to automatically discover thanos sidecars |
| thanos-local.query.enabled | bool | `true` | whether to run a thanos querier node |
| thanos-local.query.pspEnabled | bool | `true` | whether to use a pod security policy for the thanos query deployment |
| thanos-local.query.rbac.create | bool | `true` | whether to create role and rolebindings for the thanos query deployment |
| thanos-local.query.service.annotations | object | `{"cloud.google.com/app-protocols":"{\"http\":\"HTTP\"}","cloud.google.com/backend-config":"{\"default\": \"thanos-ingress-backendconfig\"}","cloud.google.com/neg":"{\"ingress\": true}"}` | additional annotations to add on to thanos query service to make ingress function properly |
| thanos-local.query.stores | list | `[]` | List of dns names of thanos store apis that can be queried. These consist of sidecars, store gateways and other queriers |
| thanos-local.queryFrontend.enabled | bool | `false` |  |
| thanos-remote.fullnameOverride | string | `"thanos-remote"` |  |
| thanos-remote.metrics.enabled | bool | `true` |  |
| thanos-remote.query.dnsDiscovery.enabled | bool | `false` | whether to have the query attempt to automatically discover thanos sidecars |
| thanos-remote.query.enabled | bool | `true` | whether to run a thanos querier node |
| thanos-remote.query.grpc.client.tls.enabled | bool | `true` | whether to use tls when connecting to sidecars via gRPC |
| thanos-remote.query.pspEnabled | bool | `true` | whether to use a pod security policy for the thanos query deployment |
| thanos-remote.query.rbac.create | bool | `true` | whether to create role and rolebindings for the thanos query deployment |
| thanos-remote.query.stores | list | `[]` | List of dns names of thanos store apis that can be queried. These consist of sidecars, store gateways and other queriers |
| thanos-remote.queryFrontend.enabled | bool | `false` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
