# Manual steps:
#  - clone https://github.com/tuenti/secrets-manager, run:
#      kubectl apply -f crd.yaml
#  - kubectl create secret generic secret-manager-approle --from-literal=role-id=*** --from-literal=secret-id=***
install-secrets-manager:
  enabled: true
  vaultLocation: https://clotho.broadinstitute.org:8200
  vaultVersion: kv1
  serviceAccount:
    create: true
  rbac:
    create: true
  existingSecret: secret-manager-approle
  existingRoleIdKey: role-id
  existingSecretIdKey: secret-id
terra-cluster-networking:
  namespaces:
    istio: istio-system
  gateway:
    name: default-istio-gateway
terra-cluster-psps:
  namespaces:
    istio: istio-system
    kubeStateMetrics: default
  serviceAccounts:
    istio:
    - istio-citadel-service-account
    - istio-galley-service-account
    - istio-ingressgateway-service-account
    - istio-mixer-service-account
    - istio-multi
    - istio-pilot-service-account
    - istio-security-post-install-account
    - istio-sidecar-injector-service-account
    - promsd
terra-prometheus:
  enabled: true
  namespaceOverride: monitoring
  prometheus-operator:
    # passing override to stable/prometheus-operator dependency
    namespaceOverride: monitoring
    # Namespace overrides for sub charts
    grafana:
      namespaceOverride: monitoring
    kube-state-metrics:
      namespaceOverride: monitoring
    prometheus-node-exporter:
      namespaceOverride: monitoring
    # Some k8s internals are abstracted by gke and are not accessible
    # The following disable prometheus scraping of those components
    coreDns:
      enabled: false
    kubeControllerManager:
      enabled: false
    kubeDns:
      enabled: true # used instead of coreDns in GKE
    kubeEtcd:
      enabled: false
    kubeScheduler:
      enabled: false
    kubeProxy:
      enabled: false