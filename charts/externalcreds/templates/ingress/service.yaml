{{- include "libchart.backendconfig" (list . "externalcreds.backendconfig" )  -}}
---
{{- include "libchart.backendconfig" (list . "externalcredspostgres.backendconfig" )  -}}

{{- define "externalcreds.backendconfig" -}}
spec:
  selector:
    deployment: {{ .Values.name }}-frontend-deployment
{{- end }}

{{- define "externalcredspostgres.backendconfig" -}}
{{- if .Values.postgres.enabled }}
metadata:
  name: {{ .Values.name }}-postgres-service
  labels:
{{- include "postgres.service.tpl" . }}
{{- end }}
