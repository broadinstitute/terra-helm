---
{{- include "libchart.service" (list . "externalcreds.service" )  -}}
{{- define "externalcreds.service" -}}
spec:
  selector:
    deployment: {{ .Values.name }}-frontend-deployment
{{- end }}
---
{{- if .Values.postgres.enabled }}
{{- include "libchart.service" (list . "externalcredspostgres.service" )  -}}
{{- end }}


{{- define "externalcredspostgres.service" -}}
{{- if .Values.postgres.enabled }}
metadata:
  name: {{ .Values.name }}-postgres-service
{{- include "postgres.service.tpl" . }}
{{- end }}
{{- end }}
