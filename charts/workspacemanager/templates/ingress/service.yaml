{{- include "libchart.service" (list . "workspacemanager.service")  -}}

{{- define "workspacemanager.service" -}}
  selector:
    deployment: {{ .Values.name }}-deployment
{{- end }}
---
{{- if .Values.postgres.enabled }}
{{- include "libchart.service" (list . "workspacemanagerpostgres.service")  -}}
{{- end }}

{{- define "workspacemanagerpostgres.service" -}}
apiVersion: v1
kind: Service
metadata:
  name: {{ .Values.name }}-postgres-service
{{- include "postgres.service.tpl" . }}
{{- end }}
