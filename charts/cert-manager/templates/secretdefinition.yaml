{{- if .Values.dnsProject.serviceAccount.createSecret -}}
apiVersion: secrets-manager.tuenti.io/v1alpha1
kind: SecretDefinition
metadata:
  name: cert-manager-dnsadmin-secret-definition
  labels:
    {{- include "certManager.labels" . | nindent 4 }}
spec:
  name: {{ .Values.dnsProject.serviceAccount.secretName }}
  keysMap:
    {{ .Values.dnsProject.serviceAccount.secretKey }}:
      path: {{ required "A Vault path must be given" .Values.vault.serviceAccountSecret.path }}
      encoding: {{ required "An encoding must be given for the Vault value" .Values.vault.serviceAccountSecret.encoding }}
      key: {{ required "A field must be given for the Vault value" .Values.vault.serviceAccountSecret.saKeyField }}
{{- end -}}
