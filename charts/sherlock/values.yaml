# -- (object) Required; contents of revere.yaml to be given to the application
config:

# Global values used by this chart
global:
  # -- (string) What version of the application to deploy
  applicationVersion: latest

imageConfig:
  # -- (string) Image repository
  repository: us-central1-docker.pkg.dev/dsp-artifact-registry/sherlock/server
  # -- (string) Image tag
  # @default -- global.applicationVersion
  tag: null
  # -- (string) When to pull images
  imagePullPolicy: Always

annotations: {}

probes:
  readiness:
    # -- (boolean) If the readiness probe should be enabled
    enabled: false
    # -- (object) Spec for the readiness probe
    spec:
  liveness:
    # -- (boolean) If the liveness probe should be enabled
    enabled: false
    # -- (object) Spec for the liveness probe
    spec:

resources:
  requests:
    # -- (string) Number of CPU units to request for the deployment
    cpu: 500m
    # -- (string) Memory to request for the deployment
    memory: 4Gi
  limits:
    # -- (string) Number of CPU units to limit the deployment to
    cpu: 500m
    # -- (string) Memory to limit the deployment to
    memory: 4Gi

ingress:
  # ingress.enabled -- Whether to create Ingress, Service and associated config resources
  enabled: true
  # ingress.staticIpName -- (string) Required. Name of the static IP, allocated in GCP, to associate with the Ingress
  staticIpName: null
  # ingress.sslPolicy -- (string) Name of a GCP SSL policy to associate with the Ingress
  sslPolicy: null
  # ingress.securityPolicy -- (string) Name of a GCP Cloud Armor security policy
  securityPolicy: null
  # ingressTimeout -- (number) number of seconds requests on the https loadbalancer will time out after
  timeoutSec: 120
  # ingress.requestPath -- (string) url path to use for load balancer health checks
  requestPath: /api/v1/metrics

  cert:
    # ingress.cert.preSharedCerts -- (list) pre provisioned tls certs to use on the load balancer
    preSharedCerts: []

  certmanager:
    # ingress.certmanager.enabled -- (bool) Whether to use cert-manager for tls credentials
    enabled : true

  domain:
    # domain.hostname -- Hostname of this deployment
    hostname: sherlock
    # domain.suffix -- Domain suffix
    suffix: dsp-devops.broadinstitute.org

vault:
  # -- (bool) Whether to use vault/secrets-manager to secrets
  enabled: true
  # -- (string) base path in vault containing sherlock's secrets
  pathPrefix: ""
  
# -- (string) Name of the application being deployed to template into manifests
name: sherlock
# -- (number) Number of sherlock pods to run
replicas: 1
# -- (string) Length of sleep to account for sqlproxy startup
startupSleep: "10"

sqlproxy:
  # -- (string) Version of the GCP cloudsql proxy to use
  version: latest

secrets:
  gcpServiceAccount:
    workloadIdentity:
      # -- (bool) Whether to use WI for auth to google apis
      enabled: true
      # -- (string) ID of the GCP SA to use
      accountName: ""
      # -- (string) ID of GCP project containing WI SA.
      projectID: ""
